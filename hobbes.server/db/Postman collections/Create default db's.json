{
	"info": {
		"_postman_id": "ff4f0c6a-c35e-4c26-aebc-ddb92a4a4048",
		"name": "Create default db's",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create _replicator",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{front}}/db/_replicator",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"_replicator"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create _global_changes",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{front}}/db/_global_changes",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"_global_changes"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create _users",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{front}}/db/_users",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"_users"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create transformations",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{front}}/db/transformations",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"transformations"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create rawdata",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{front}}/db/rawdata",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"rawdata"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create configurations",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						},
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{front}}/db/configurations",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"configurations"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create design document in rawdata.",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "username",
							"value": "{{couch_user}}",
							"type": "string"
						},
						{
							"key": "password",
							"value": "{{couch_password}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"_id\": \"_design/default\",\n  \"views\": {\n    \"table\": {\n      \"map\": \"function(doc){\\r\\n  \\r\\n  var columnNames = [];\\r\\n  var values = [];\\r\\n  var map = [];\\r\\n  \\r\\n    if(doc.source == \\\"Azure DevOps\\\") {\\r\\n      var index = 0;\\r\\n      for(o in doc.data.value) {\\r\\n        buildMap(\\\"\\\", doc.data.value[o], index++);\\r\\n      }\\r\\n        \\r\\n      for(i in map) {\\r\\n        columnNames.push(map[i][0]);\\r\\n        map[i].shift();\\r\\n        values.push(map[i]);\\r\\n      }\\r\\n      emit([doc.source, doc.project, doc._id], {\\\"columnNames\\\": columnNames, \\\"values\\\": values});\\r\\n    }\\r\\n  \\r\\n  function add(array, key, value, index) {\\r\\n    var existed = false;\\r\\n    for(x in array) {\\r\\n      if(array[x][0] == key) {\\r\\n        addNull(array[x], index - (array[x].length - 1));\\r\\n        array[x].push(value);\\r\\n        existed = true;\\r\\n      }\\r\\n    }\\r\\n    if(!existed) {\\r\\n      var entry = [];\\r\\n      entry.push(key);\\r\\n      addNull(entry, index)\\r\\n      entry.push(value);\\r\\n      array.push(entry);\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  function addNull(array, n)\\r\\n  {\\r\\n    for(var i = 0; i < n; i++) {\\r\\n        array.push(null);\\r\\n      }\\r\\n  }\\r\\n    \\r\\n    function buildMap(prefix, o, index) {\\r\\n      for (tag in o) {\\r\\n        if(typeof o[tag] == 'object') buildMap(prefix + \\\".\\\" + tag, o[tag], index)\\r\\n        else {\\r\\n          var dottedName = prefix + \\\".\\\" + tag;\\r\\n          var name = dottedName.substring(1, dottedName.length);\\r\\n          add(map, name, o[tag], index);\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n}\"\n    }\n  },\n  \"language\": \"javascript\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{front}}/db/rawdata/_design/default",
					"host": [
						"{{front}}"
					],
					"path": [
						"db",
						"rawdata",
						"_design",
						"default"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}