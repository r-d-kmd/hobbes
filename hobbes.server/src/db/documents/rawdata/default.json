{
  "_id": "_design/default",
  "views": {
    "table": {
      "map": "function(doc){var key = [doc.source,doc.project];\nif(doc.Url){emit(key,doc._id);}}"
    },
    "WorkItemRevisions": {
      "map": "function(doc){\n  var max = function(arr,comparer) {\n\n    if (arr.length === 0) return null;\n    if (arr.length === 1) return arr[0];\n\n    comparer = (comparer || Math.max);\n\n    var v = arr[0];\n    for (var i = 1; i < arr.length; i++) {\n        v = comparer(arr[i], v);    \n    }\n\n    return v;\n  };\n  \n  var data = doc.data;\n  if(data && data.value){\n    var key = [doc.source,doc.project];\n    var values = data.value;\n    var revisions = [];\n    for(var i = 0;i<values.length; i++ ){\n      revisions[i] = values[i].WorkItemRevisionSK;\n    }\n    var value = max(revisions); \n    emit(key,value || 0);\n  }\n}"
    }
  },
  "language": "javascript"
}